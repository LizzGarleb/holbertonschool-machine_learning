#!/usr/bin/env python3
"""
Main file
"""

# Force Seed - fix for Keras
SEED = 0

import os
os.environ['PYTHONHASHSEED'] = str(SEED)
import random
random.seed(SEED)
import numpy as np
np.random.seed(SEED)
import tensorflow as tf
tf.random.set_seed(SEED)
import tensorflow.keras as K

# Imports
model = __import__('9-model')
config = __import__('11-config')

if __name__ == '__main__':
    network = model.load_model('network1.h5')
    config.save_config(network, 'config1.json')
    del network

    network2 = config.load_config('config1.json')
    network2.summary()
    print(network2.get_weights())

# Expected Output:
# Model: "model"
# _________________________________________________________________
# Layer (type)                 Output Shape              Param #   
# =================================================================
# input_1 (InputLayer)         [(None, 784)]             0         
# _________________________________________________________________
# dense (Dense)                (None, 256)               200960    
# _________________________________________________________________
# dropout (Dropout)            (None, 256)               0         
# _________________________________________________________________
# dense_1 (Dense)              (None, 256)               65792     
# _________________________________________________________________
# dropout_1 (Dropout)          (None, 256)               0         
# _________________________________________________________________
# dense_2 (Dense)              (None, 10)                2570      
# =================================================================
# Total params: 269,322
# Trainable params: 269,322
# Non-trainable params: 0
# _________________________________________________________________
# [array([[ 0.09755433, -0.04439786,  0.0159336 , ...,  0.06546799,
#         -0.06438305,  0.11030034],
#        [-0.03220614,  0.05014394, -0.00391707, ...,  0.03036241,
#         -0.023662  ,  0.05960257],
#        [-0.00576851,  0.02501452,  0.03901079, ...,  0.09244704,
#          0.02196747, -0.01448548],
#        ...,
#        [-0.08673904, -0.02818543, -0.01874564, ..., -0.01084538,
#          0.05287042, -0.09048827],
#        [-0.07018229,  0.04759979,  0.01407349, ...,  0.0639261 ,
#         -0.02276148,  0.0597288 ],
#        [-0.06414918, -0.04054742, -0.03678115, ..., -0.08878446,
#         -0.06040734, -0.07033222]], dtype=float32), array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0.], dtype=float32), array([[ 0.16218024, -0.11585914, -0.03359719, ...,  0.06486474,
#          0.13461713,  0.07519221],
#        [-0.04702299, -0.08220801,  0.1295613 , ...,  0.00597018,
#          0.13171004, -0.0238106 ],
#        [-0.11800576, -0.01402459,  0.07212522, ..., -0.10223424,
#          0.19515261, -0.04257286],
#        ...,
#        [-0.11955044,  0.03555733, -0.11103541, ...,  0.01749619,
#         -0.01059467, -0.0881863 ],
#        [ 0.02619276,  0.07703771,  0.02254102, ...,  0.14659946,
#          0.1243856 ,  0.00390353],
#        [ 0.03410518, -0.06848464,  0.0537805 , ...,  0.10536972,
#          0.06232681,  0.00542855]], dtype=float32), array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
#        0.], dtype=float32), array([[-0.11802351, -0.06863644, -0.02219525, ..., -0.01295948,
#         -0.03704168,  0.02199893],
#        [-0.02810469,  0.12117346, -0.1583393 , ...,  0.06340335,
#          0.15330832, -0.03095309],
#        [ 0.08470405, -0.17145142,  0.03714371, ...,  0.05512213,
#         -0.13882932,  0.02659133],
#        ...,
#        [ 0.06049234,  0.0100652 ,  0.18837386, ..., -0.1163343 ,
#         -0.07376061,  0.07689571],
#        [-0.10010697,  0.19503419, -0.03712299, ..., -0.06838577,
#          0.05296772, -0.11932171],
#        [-0.08302095, -0.03794345,  0.03074163, ..., -0.03965671,
#         -0.00607733, -0.07140073]], dtype=float32), array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.], dtype=float32)]
